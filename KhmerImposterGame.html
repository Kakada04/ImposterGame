<!DOCTYPE html>
<html lang="en" class="h-full bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>á›áŸ’á”áŸ‚á„ Imposter</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body,
        html {
            font-family: 'Kantumruy', sans-serif;
        }

        .card-mask {
            background: linear-gradient(135deg, #1e3a8a, #5b21b6);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.4) inset;
        }

        .reveal-effect {
            animation: glow 1s ease-out forwards;
        }

        @keyframes glow {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="h-full text-white flex items-center justify-center p-4">

    <div id="app"
        class="max-w-lg w-full mx-auto bg-black bg-opacity-30 backdrop-blur-lg rounded-3xl shadow-2xl overflow-hidden border border-white border-opacity-20">

        <!-- Header -->
        <div class="text-center py-8 px-6">
            <h1 class="text-4xl font-bold mb-2">Imposter Game</h1>
            <p class="text-sm opacity-90">ášá€ Imposter!</p>
        </div>

        <!-- Setup Screen -->
        <div id="setup" class="p-6 space-y-6">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">á…áŸ†á“á½á“á¢áŸ’á“á€á›áŸá„</label>
                    <input type="number" id="numPlayers" min="2" max="20" value="4"
                        class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-center text-lg">
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2"> Imposter</label>
                    <input type="number" id="numImposters" min="1" max="2" value="1"
                        class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-20 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-center text-lg">
                </div>
            </div>
            <button id="startBtn"
                class="w-full py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold rounded-2xl text-xl hover:from-yellow-300 hover:to-orange-400 transform transition hover:scale-105 shadow-lg">
                ğŸš€ á…á¶á”áŸ‹á•áŸ’áá¾á˜á›áŸ’á”áŸ‚á„
            </button>
        </div>

        <!-- Game Screen -->
        <div id="game" class="hidden p-6 space-y-6">
            <!-- Big Player Label -->
            <div class="text-center">
                <!-- <p class="text-xl opacity-90">á€áŸ†á–á»á„á”á¾á€áá½áš</p> -->
                <p class="text-3xl font-bold text-yellow-300 mb-2">
                    <span id="currentPlayerBig">á¢áŸ’á“á€á›áŸá„á‘á¸ 1</span>
                </p>
                <p id="playerStatus" class="text-lg opacity-80">á€áŸ†á–á»á„á”á¾á€â€‹ <span id="currentNum">1</span> / <span
                        id="totalNum">4</span></p>
            </div>

            <!-- Player Card -->
            <div
                class="relative mx-auto w-full max-w-xs aspect-square rounded-2xl overflow-hidden shadow-xl border-4 border-dashed border-yellow-300 card-mask">
                <!-- Small Label on Card -->
                <div
                    class="absolute -top-6 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-bold z-10">
                    <span id="playerLabel">á¢áŸ’á“á€á›áŸá„á‘á¸ 1</span>
                </div>

                <!-- Hidden Role -->
                <div id="roleText"
                    class="absolute inset-0 flex items-center justify-center text-3xl font-bold text-yellow-200 rounded-2xl"
                    style="opacity: 0; z-index: 5;">
                </div>

                <!-- Mask Layer -->
                <div id="maskLayer" class="absolute inset-0 flex items-center justify-center rounded-2xl z-10"
                    style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(236, 72, 153, 0.6)), linear-gradient(135deg, #4f46e5, #ec4899); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
                    <span class="text-white text-4xl font-extrabold drop-shadow-lg">?</span>
                </div>

                <!-- Show Role Button -->
                <button id="showBtn"
                    class="absolute bottom-4 left-1/2 transform -translate-x-1/2 py-2 px-6 bg-green-500 rounded-xl font-bold hover:bg-green-400 transition z-20 whitespace-nowrap">
                    ğŸ” á”á„áŸ’á á¶á‰á–á¶á€áŸ’á™
                </button>
            </div>

            <!-- Buttons -->
            <div class="flex gap-3">
                <button id="nextBtn"
                    class="flex-1 py-3 bg-green-500 rounded-xl font-bold hover:bg-green-400 transition hidden">
                    á¢áŸ’á“á€á”á“áŸ’á‘á¶á”áŸ‹ â†’
                </button>
                <button id="showImpostersBtn"
                    class="flex-1 py-3 bg-red-600 rounded-xl font-bold hover:bg-red-500 transition hidden">
                    á”á„áŸ’á á¶á‰ Imposter
                </button>
            </div>
        </div>

        <!-- Suspense Screen -->
        <div id="suspense" class="hidden p-6 text-center space-y-6">
            <h2 class="text-3xl font-bold text-yellow-400 animate-pulse">á–áŸá›áœáŸá›á¶á˜á€áŠá›áŸ‹á á¾á™!</h2>
            <p class="text-xl">áá¾á¢áŸ’á“á€áá¶á‡á¶ <span class="text-red-400 font-bold"> Imposter</span>?</p>
            <button id="revealImposterBtn"
                class="w-full py-4 bg-gradient-to-r from-red-600 to-pink-600 font-bold rounded-2xl hover:from-red-500 hover:to-pink-500 transition transform hover:scale-105">
                ğŸ” á”á„áŸ’á á¶á‰ Imposter
            </button>
        </div>

        <!-- End Screen -->
        <div id="endGame" class="hidden p-6 text-center space-y-4">
            <h2 class="text-3xl font-bold text-yellow-400"> Imposterá‚áº...</h2>
            <p id="imposterList" class="text-2xl"></p>
            <button id="playAgainBtn"
                class="w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 font-bold rounded-2xl hover:from-purple-400 hover:to-pink-400 transition">
                â–¶ï¸ á›áŸá„á˜áŸ’áá„á‘áŸ€á
            </button>
        </div>

    </div>
    
    <!-- Creator Credit Badge - Top Left -->
    <a href="https://portfolio-beta-ten-31.vercel.app/" target="_blank" rel="noopener noreferrer" style="
    position: fixed;
    top: 1rem;
    left: 1rem;
    z-index: 9999;
    font-family: 'Kantumruy', 'Segoe UI', sans-serif;
    font-size: 12px;
    font-weight: 500;
    color: #fefeff;
    background: linear-gradient(to bottom right, #2479e9, #3e046d);
    padding: 6px 12px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 6px;
    border: 1px solid #e5e7eb;
    transition: all 0.2s ease;
    max-width: max-content;
  " onmouseover="this.style.transform='translateY(-2px);'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';"
        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 6px rgba(0,0,0,0.1)';">
        <span style="font-size: 14px;">ğŸ‘¨â€ğŸ’»</span>
        <span >Credit: kakada</span>
    </a>
    <script>
        // Khmer Words
        const khmerWords = [
            "á¢áŸ’á“á€á…á˜áŸ’á€á¶áš", "á‚áŸ’ášá¼á”á„áŸ’ášáŸ€á“", "áœáŸá‡áŸ’á‡á”ááŸ’áŒá·á", "á¢áŸ’á“á€áƒáŸ’á›á¶áŸ†", "á†áŸ’á˜á¶", "á€á¼á“á‚áŸ„", "á‘á“áŸ’áŸá¶á™", "áŸááŸ’áœá…á…á€", "á–áŸáŸ‹", "ááŸ’ášá¸",
            "áŸááŸ’áœá€áŸ†á”áŸ’á›áŸ‚á„", "áŸááŸ’áœáŸáŸ’áœá¶", "áŸááŸ’áœá‘á¶", "áŸááŸ’áœá”á€áŸ’áŸá¶", "áŸááŸ’áœá˜á¶á“áŸ‹", "áŸááŸ’áœá†áŸ’á€áŸ‚", "áŸááŸ’áœá‚áŸ„", "áŸááŸ’áœááŸ’á›á¶áƒáŸ’á˜á»áŸ†", "áŸááŸ’áœáŸáŸá€", "áŸááŸ’áœáŠáŸ†ášá¸",
            "áŸááŸ’áœáŸá·á„", "áŸááŸ’áœá áŸ„á„", "áŸááŸ’áœá€á„áŸ’á€áŸ‚á”", "áŸááŸ’áœá›áŸ’á¢á·á", "áŸááŸ’áœášá€á¶", "áŸááŸ’áœá€áŸ’áá¶á“áŸ‹", "á•áŸ’á€á¶áˆá¼á€", "áŠá¾á˜ááŸ’á“áŸ„á", "áŠá¾á˜á…áŸá€", "áŠá¾á˜áŸáŸ’áœá¶á™",
            "áŠá¾á˜áŠá¼á„", "á•áŸ’á€á¶á˜áŸ’á€á¶á€áŸ‹", "á•áŸ’á€á¶á˜á¶á€áŸ‹", "á—áŸ’á“áŸ†", "á‘á“áŸ’á›áŸ", "áŸá˜á»á‘áŸ’áš", "áœá¶á›áŸáŸ’ášáŸ‚", "áœá¶á›ááŸ’áŸá¶á…áŸ‹", "á¢á¶á€á¶áŸ", "á–áŸ’ášáŸ‡á¢á¶á‘á·ááŸ’á™",
            "á–áŸ’ášáŸ‡á…áŸá“áŸ’á‘", "á•áŸ‚á“áŠá¸", "á—áŸ’á›á¾á„", "á‘á¹á€", "ááŸ’á™á›áŸ‹", "áŠá¸", "á¢á¶á‚á¶áš", "á•áŸ’á‘áŸ‡", "áœá·á á¶áš", "áŸá¶á›á¶ášáŸ€á“", "á˜á“áŸ’á‘á¸ášá–áŸá‘áŸ’á™", "á•áŸ’áŸá¶áš",
            "ášáá™á“áŸ’á", "á˜áŸ‰á¼áá¼", "á‘á¼á€", "á™á“áŸ’áá áŸ„áŸ‡", "ášáá—áŸ’á›á¾á„", "á‘á¼ášáŸá–áŸ’á‘", "á€á»áŸ†á–áŸ’á™á¼á‘áŸáš", "áœá·á‘áŸ’á™á»", "á‘á¼ášá‘áŸáŸ’áŸá“áŸ", "áŸáŸ€áœá—áŸ…",
            "ááŸ‚", "ááŸ’á„áŸƒ", "á˜áŸ‰áŸ„á„", "á“á¶á‘á¸", "áœá·á“á¶á‘á¸", "á†áŸ’á“á¶áŸ†", "á¢á¶á™á»", "áˆáŸ’á˜áŸ„áŸ‡", "á—á¶áŸá¶", "á¢á€áŸ’áŸáš", "á–á¶á€áŸ’á™", "á”áŸ’ášá‘áŸáŸ",
            "ášá¶á‡á’á¶á“á¸", "ááŸááŸ’á", "áŸáŸ’ášá»á€", "áƒá»áŸ†", "á—á¼á˜á·", "á˜á“á»áŸáŸ’áŸ", "á€áŸ’á˜áŸá„á”áŸ’ášá»áŸ", "á€áŸ’á˜áŸá„áŸáŸ’ášá¸", "á”á»ášáŸ", "áŸáŸ’ááŸ’ášá¸",
            "áªá–á»á€", "á˜áŸ’áá¶á™", "á€á¼á“", "á”á„", "á”áŸ’á¢á¼á“", "á”áŸ’áá¸", "á”áŸ’ášá–á“áŸ’á’", "á˜á·ááŸ’á", "áŸááŸ’ášá¼áœ", "áŸá·áŸáŸ’áŸ", "á“á·áŸáŸ’áŸá·á",
            "á¢áŸ’á“á€á’áŸ’áœá¾á€á¶áš", "á¢áŸ’á“á€á…á˜áŸ’á”á¶áŸ†á„", "á¢áŸ’á“á€á“á·á–á“áŸ’á’", "á¢áŸ’á“á€á…á˜áŸ’ášáŸ€á„", "á¢áŸ’á“á€ášá¶áŸ†", "á¢áŸ’á“á€á‚á¼áš", "á¢áŸ’á“á€ááášá¼á”", "á¢áŸ’á“á€á…áŸ†á¢á·á“", "á¢áŸ’á“á€á›á€áŸ‹", "á¢áŸ’á“á€á‘á·á‰"
        ];

        // Game State
        let gameState = {
            players: [],
            currentIdx: 0,
            usedCrewWords: new Set(),
            allWordsExhausted: false
        };

        // Elements
        const $ = id => document.getElementById(id);
        const setup = $('setup');
        const game = $('game');
        const suspense = $('suspense');
        const endGame = $('endGame');
        const startBtn = $('startBtn');
        const nextBtn = $('nextBtn');
        const showImpostersBtn = $('showImpostersBtn');
        const revealImposterBtn = $('revealImposterBtn');
        const playAgainBtn = $('playAgainBtn');
        const showBtn = $('showBtn');
        const roleText = $('roleText');
        const maskLayer = $('maskLayer');
        const playerStatus = $('playerStatus');
        const currentNum = $('currentNum');
        const totalNum = $('totalNum');
        const playerLabel = $('playerLabel');
        const currentPlayerBig = $('currentPlayerBig');
        const imposterList = $('imposterList');

        // Get unique crew word
        function getCrewWord() {
            if (gameState.usedCrewWords.size >= khmerWords.length) {
                gameState.usedCrewWords = new Set();
                gameState.allWordsExhausted = true;
            }
            const available = khmerWords.filter(w => !gameState.usedCrewWords.has(w));
            const word = available.length > 0
                ? available[Math.floor(Math.random() * available.length)]
                : khmerWords[Math.floor(Math.random() * khmerWords.length)];
            gameState.usedCrewWords.add(word);
            return word;
        }

        // Start Game
        startBtn.addEventListener('click', () => {
            const numPlayers = parseInt($('numPlayers').value);
            let numImposters = parseInt($('numImposters').value);

            if (isNaN(numPlayers) || numPlayers < 2 || numPlayers > 20) {
                alert("á…áŸ†á“á½á“á¢áŸ’á“á€á›áŸá„ááŸ’ášá¼áœááŸ‚á–á¸ 2 á‘áŸ… 20");
                return;
            }
            if (numImposters < 1 || numImposters > 2 || numImposters >= numPlayers) {
                alert(" ImposterááŸ’ášá¼áœááŸ‚ 1 á¬ 2 á á¾á™áá·á…á‡á¶á„á…áŸ†á“á½á“á¢áŸ’á“á€á›áŸá„");
                return;
            }

            // Reset
            gameState.players = [];
            gameState.currentIdx = 0;
            if (gameState.allWordsExhausted) gameState.usedCrewWords = new Set();

            const crewWord = getCrewWord();

            for (let i = 0; i < numImposters; i++) {
                gameState.players.push({ role: " Imposter" });
            }
            for (let i = 0; i < numPlayers - numImposters; i++) {
                gameState.players.push({ role: crewWord });
            }

            // Shuffle roles
            for (let i = gameState.players.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [gameState.players[i], gameState.players[j]] = [gameState.players[j], gameState.players[i]];
            }

            // Update UI
            totalNum.textContent = numPlayers;
            currentNum.textContent = 1;
            playerStatus.textContent = `á€áŸ†á–á»á„á”á¾á€â€‹ 1 / ${numPlayers}`;
            playerLabel.textContent = `á¢áŸ’á“á€á›áŸá„á‘á¸ 1`;
            currentPlayerBig.textContent = `á¢áŸ’á“á€á›áŸá„á‘á¸ 1`;

            // Show game
            setup.classList.add('hidden');
            game.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            showImpostersBtn.classList.add('hidden');
            roleText.style.opacity = 0;
            maskLayer.style.display = 'flex';
            showBtn.style.display = 'block';
        });

        // Show Role
        showBtn.addEventListener('click', () => {
            const player = gameState.players[gameState.currentIdx];
            roleText.textContent = player.role;
            roleText.classList.add('reveal-effect');
            roleText.style.opacity = 1;
            maskLayer.style.display = 'none';
            showBtn.style.display = 'none';
            nextBtn.classList.remove('hidden');
        });

        // Next Player
        nextBtn.addEventListener('click', () => {
            gameState.currentIdx++;
            if (gameState.currentIdx >= gameState.players.length) {
                game.classList.add('hidden');
                suspense.classList.remove('hidden');
            } else {
                currentNum.textContent = gameState.currentIdx + 1;
                playerStatus.textContent = `á€áŸ†á–á»á„á”á¾á€â€‹ ${gameState.currentIdx + 1} / ${gameState.players.length}`;
                const playerNum = gameState.currentIdx + 1;
                playerLabel.textContent = `á¢áŸ’á“á€á›áŸá„ ${playerNum}`;
                currentPlayerBig.textContent = `á¢áŸ’á“á€á›áŸá„ ${playerNum}`;
                roleText.style.opacity = 0;
                roleText.classList.remove('reveal-effect');
                maskLayer.style.display = 'flex';
                showBtn.style.display = 'block';
                nextBtn.classList.add('hidden');
            }
        });

        // Reveal Imposter
        revealImposterBtn.addEventListener('click', () => {
            suspense.classList.add('hidden');
            endGame.classList.remove('hidden');
            const imposters = gameState.players
                .map((p, i) => p.role === " Imposter" ? `á¢áŸ’á“á€á›áŸá„ ${i + 1}` : null)
                .filter(Boolean)
                .join(' á“á·á„ ');
            imposterList.textContent = imposters;
        });

        // Play Again
        playAgainBtn.addEventListener('click', () => {
            endGame.classList.add('hidden');
            setup.classList.remove('hidden');
        });
    </script>
</body>

</html>